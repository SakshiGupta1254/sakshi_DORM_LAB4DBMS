CREATE DEFINER=`root`@`localhost` PROCEDURE `new_procedure`()
BEGIN
SELECT SOP.ORD_ID, SOP.SUPP_ID,R.RAT_RATSTARS,
 case
when R.RAT_RATSTARS  = 5 then'EXCELLENT Service'
when  R.RAT_RATSTARS  > 4 then 'Good Service '
when R.RAT_RATSTARS  > 2 then'AVERAGE Service '
else 'POOR SERVICE'
end  as Type_of_Service FROM (SELECT SUPP_PRO.SUPP_ID,O.ORD_ID FROM(SELECT SUPPLIER_PRICING.PRICING_ID,PRODUCT.PRO_NAME,PRODUCT.PRO_ID,SUPPLIER_PRICING.SUPP_ID
 FROM SUPPLIER_PRICING INNER JOIN PRODUCT ON SUPPLIER_PRICING.PRO_ID = PRODUCT.PRO_ID) AS SUPP_PRO INNER JOIN `ORDER` AS O ON O.PRICING_ID = SUPP_PRO.PRICING_ID)
 AS SOP INNER JOIN RATING AS R ON R.ORD_ID=SOP.ORD_ID; 
END
